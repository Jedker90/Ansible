    - name: Ustaw opis interfejsu
      ios_command:
        commands:
          - "interface Gi{{item}}"
          - "description Konfiguracja automatyczna"
      with_sequence: start=0 end=2




  tasks:
    - name: Wykryj interfejsy
      ios_command:
        commands:
          - show interfaces
      register: interfejsy

    - name: Dodaj konfigurację AAA
      ios_config:
        lines:
          - "aaa authentication periodic default local"
        parents: "{{ item }}"
      with_items: "{{ interfejsy.stdout_lines }}"
	  
	  
	  
	  
	  
	  
	  ---
- name: Moj_Playbook
  hosts: Cisco
  gather_facts: false
  connection: network_cli
  become: true

  tasks:
    - name: Pobierz informacje o interfejsach
      ios_command:
        commands:
          - show interfaces
      register: interface_output

    - name: Wybierz interfejsy
      set_fact:
        selected_interfaces: "{{ interface_output.stdout_lines | select('match', '^GigabitEthernet[0-9]+$') | list }}"

    - name: Dodaj konfigurację AAA
      ios_config:
        lines:
          - "description Ansible ADZIN"
        parents: "{{ item }}"
      with_items: "{{ selected_interfaces }}"
	  
	  
	  
	  
	  ---
- name: Moj_Playbook
  hosts: Cisco
  gather_facts: false
  connection: network_cli
  become: true


  tasks:

    - name: TASK1_show interface
      ios_command:
        commands: show interface
      register: interfejsy

    - name: Dodaj konfigurację AAA authentication
      cisco.ios.ios_config:
        lines:
          - "aaa authentication login default local"
          - "aaa authentication enable default enable"
        parents: "interface {{ interfejsy }}"
